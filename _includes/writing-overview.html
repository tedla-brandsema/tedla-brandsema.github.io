{% assign selected_types = include.types | default: "" | replace: " ", "" | split: "," %}
{% assign items = site.pages | sort: "published" | reverse %}

<main>
  <h1>{{ page.title }}</h1>

  <section class="search-results" aria-label="{{ page.title }} overview">
    {% for p in items %}
      {% if selected_types contains p.type %}
      <article class="search-result-item">
        <h2>
          <a href="{{ p.url }}">{{ p.heading | default: p.title | default: p.name }}</a>
        </h2>
        <p class="search-result-meta">
          {% include published.html item=p inline=true %}
        </p>
        <p class="search-result-intro">
          {{ p.intro | default: p.description | default: p.excerpt | strip_html | strip_newlines | truncate: 240 }}
        </p>
      </article>
      {% endif %}
    {% endfor %}
  </section>
</main>
