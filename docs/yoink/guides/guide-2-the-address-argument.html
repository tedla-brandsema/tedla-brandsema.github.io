---
layout: default
title: Yoink — The Address Argument
---

{% include nav-yoink.html %}

<main>
    <h1>The Address Argument</h1>
    <p>Yoinks most useful and powerful feature is the ability to target a specific region by adding an address to the
        end of a <code class="language-none">.yoink</code> command.</p>

    <p>The address syntax is similar in its simplest form to that of the text editor <a target="_blank"
            href="https://www.gnu.org/software/ed/">ed</a>, but comes from the sam text editor and is more general. See
        Table II of <a target="_blank" href="https://plan9.io/sys/doc/sam/sam.html">The Text Editor sam</a> paper for
        more details. Note that the displayed block is always rounded out to a full line at both ends.</p>

    <section class="divider">
        <h2>Defining a Region</h2>
    </section>
    <p>In our previous examples, we only included entire files into our root file. With the help of the address
        argument, however, we can target a specific region within a file.</p>

    <p>Consider the sonnet-18-quatrains.txt file below:</p>

    <pre><code class="language-none">
#START stanza-1
Shall I compare thee to a summer’s day?
Thou art more lovely and more temperate:
Rough winds do shake the darling buds of May,
And summer’s lease hath all too short a date;
#END stanza-1

#START stanza-2
Sometime too hot the eye of heaven shines,
And often is his gold complexion dimm'd;
And every fair from fair sometime declines,
By chance or nature’s changing course untrimm'd;
#END stanza-2

#START stanza-3
But thy eternal summer shall not fade,
Nor lose possession of that fair thou ow’st;
Nor shall death brag thou wander’st in his shade,
When in eternal lines to time thou grow’st:
#END stanza-3               
    </code></pre>
    <p>It contains regions that are marked by <code class="language-none">#START</code> and <code
            class="language-none">#END</code>. The <code class="language-none">#START</code> and <code
            class="language-none">#END</code>
        demarcations are not mandatory, and the <code class="language-none">#</code> character holds no special meaning.
        They are just strings that can be latched on to by
        regular expressions in the address argument of the <code class="language-none">.yoink</code> command.</p>

    <p>We also add a unique identifier to each region, so we can distinguish one region from another. In this case we
        use the stanza index as a unique identifier.</p>
    </section>

    <section class="divider">
        <h2>Using the Address Argument</h2>

        <p>To target a specific region in a file, we add an address to the end of a <code
                class="language-none">.yoink</code>
            command. The address is separated from the file name by a space.</p>

        <p>Consider the following root file:</p>

        <pre><code class="language-none">
Sonnet 18: Shall I compare thee to a summer’s day?
By William Shakespeare

.yoink sonnet-18-quatrains.txt /START stanza-2/,/END stanza-2/

.yoink sonnet-18-rhyming-couplet.txt

.yoink sonnet-18-quatrains.txt /START stanza-3/,/END stanza-3/

.yoink sonnet-18-quatrains.txt /START stanza-1/,/END stanza-1/
        </code></pre>

        <p>Here you can see that all .yoink commands that point to sonnet-18-quatrains.txt have a second argument. This
            argument is an <em>address</em>. The addresses in our root file correspond to regions in our target file.
        </p>

        <p>Let's analyze the address of the first <code class="language-none">.yoink</code> command:</p>

        <pre><code class="language-none">
/START stanza-2/,/END stanza-2/
        </code></pre>

        <p>If you take a look at Table II of <a target="_blank" href="https://plan9.io/sys/doc/sam/sam.html">The Text
                Editor
                sam</a> paper, we see that we have a regular expression <code
                class="language-none">/START stanza-2/</code>
            followed by the address mark <code class="language-none">,</code>, and finally we have a second regular
            expression <code class="language-none">/END stanza-2/</code>.</p>

        <p>Also note that there is no mention of the <code class="language-none">#</code> in the address argument. Why
            then add a <code class="language-none">#</code> in the first place? It is here to illustrate two points:
        <ol>
            <li>The address argument is line based, just like everything else in Yoink. Partiallly matching a line (as
                long as it is unique) is sufficient to target the entire line.</li>
            <li>You can prepend your region demarcanstions with a comment identifier of the original file format.
                For example, you can use <code class="language-none">//</code> in a lot of programming languages to mark
                comments.</li>
        </ol>
        </p>

        <p>The regular expressions here are just literal matches, but you can use more involved regular expression
            pattern matching syntax.</p>



    </section>
    <section class="divider">
        <h2>A Jumbled Result</h2>

        <p>Running the jumbled root file with Yoink, yields the following result:</p>

        <pre><code class="language-none">
Sonnet 18: Shall I compare thee to a summer’s day?
By William Shakespeare

#START stanza-2
Sometime too hot the eye of heaven shines,
And often is his gold complexion dimm'd;
And every fair from fair sometime declines,
By chance or nature’s changing course untrimm'd;
#END stanza-2

So long as men can breathe or eyes can see,
So long lives this, and this gives life to thee.

#START stanza-3
But thy eternal summer shall not fade,
Nor lose possession of that fair thou ow’st;
Nor shall death brag thou wander’st in his shade,
When in eternal lines to time thou grow’st:
#END stanza-3

#START stanza-1
Shall I compare thee to a summer’s day?
Thou art more lovely and more temperate:
Rough winds do shake the darling buds of May,
And summer’s lease hath all too short a date;
#END stanza-1
</code></pre>

        <p>We succeeded in jumbling the output using addresses, but we now have the undesirable effect that the address
            demarcations ended up in the resulting output.</p>
    </section>
    <section class="divider">
        <h2>Omitting the address demarcations</h2>

        <p>In most cases, you want to omit the address demarcations from the resulting output. For example, in our
            case, we just want the text of the sonnet without the <code class="language-none">#START</code> and <code
                class="language-none">#END</code> lines.</p>
        <p>Luckily we have a way to circumvent this: all lines that ends with the four characters <code
                class="language-none">OMIT</code> are not included in the final output.</p>

        <p>So if we were to append the demarcations with <code class="language-none">OMIT</code> as shown below:</p>

        <pre><code class="language-none">
#START stanza-1 OMIT
Shall I compare thee to a summer’s day?
Thou art more lovely and more temperate:
Rough winds do shake the darling buds of May,
And summer’s lease hath all too short a date;
#END stanza-1 OMIT

#START stanza-2 OMIT
Sometime too hot the eye of heaven shines,
And often is his gold complexion dimm'd;
And every fair from fair sometime declines,
By chance or nature’s changing course untrimm'd;
#END stanza-2 OMIT

#START stanza-3 OMIT
But thy eternal summer shall not fade,
Nor lose possession of that fair thou ow’st;
Nor shall death brag thou wander’st in his shade,
When in eternal lines to time thou grow’st:
#END stanza-3 OMIT
</code></pre>

        <p>And update the regular expressions in the root file to match the new demarcations:</p>

        <pre><code class="language-none">
Sonnet 18: Shall I compare thee to a summer’s day?
By William Shakespeare

.yoink sonnet-18-quatrains.txt /START stanza-2 OMIT/,/END stanza-2 OMIT/

.yoink sonnet-18-rhyming-couplet.txt

.yoink sonnet-18-quatrains.txt /START stanza-3 OMIT/,/END stanza-3 OMIT/

.yoink sonnet-18-quatrains.txt /START stanza-1 OMIT/,/END stanza-1 OMIT/
        </code></pre>

        <p>We get the desired jumbled output, but without the demarcation lines:</p>

        <pre><code class="language-none">
Sonnet 18: Shall I compare thee to a summer’s day?
By William Shakespeare

Sometime too hot the eye of heaven shines,
And often is his gold complexion dimm'd;
And every fair from fair sometime declines,
By chance or nature’s changing course untrimm'd;

So long as men can breathe or eyes can see,
So long lives this, and this gives life to thee.

But thy eternal summer shall not fade,
Nor lose possession of that fair thou ow’st;
Nor shall death brag thou wander’st in his shade,
When in eternal lines to time thou grow’st:

Shall I compare thee to a summer’s day?
Thou art more lovely and more temperate:
Rough winds do shake the darling buds of May,
And summer’s lease hath all too short a date;
    </code></pre>

</main>